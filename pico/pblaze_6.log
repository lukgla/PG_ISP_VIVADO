KCPSM6 Assembler log file for program 'C:\Users\lukgla\Desktop\Vivado\pico\pblaze_6.psm'.
Generated by KCPSM6 version v2.70
Ken Chapman - Xilinx Ltd - 16th May 2014

Assembly datestamp: 06 Apr 2024
Assembly timestamp: 00:13:35

Contents
  Assembly listing
  List of PSM files
  List of CONSTANTs
  List of TABLEs
  List of STRINGs
  List of line labels
  Instruction usage statistics


Last occupied address: 04C hex
Nominal program memory size: 1K (1024)   address(9:0)
Actual memory size: 4096
  (Default memory size)
Occupied memory locations: 77
Memory locations available: 4019


Assembly listing

 Addr Code                             Instruction

 000                                   ;
 000                                   ; PiÄty program na Picoblaze
 000                                   ;
 000                                   TABLE 7_segment_decode#, [3F,06,5B,4F,66,6D,7D,07,7F,6F]
 000                                   CONSTANT 7seg_el1_port, 00000001'b
 000                                   CONSTANT 7seg_el2_port, 00000010'b
 000                                   CONSTANT 7seg_el3_port, 00000100'b
 000                                   CONSTANT 7seg_el4_port, 00001000'b
 000                                   CONSTANT state_is_editing, 10000000'b
 000                                   ; -- port is equal to which one is edited right now
 000                                   CONSTANT button_up, 00000010'b
 000                                   CONSTANT button_down, 00000001'b
 000                                   CONSTANT button_edit, 00001000'b
 000                                   CONSTANT button_left, 00001000'b
 000                                   CONSTANT button_right, 00000100'b
 000                                   NAMEREG sE, buttons
 000                                   NAMEREG sF, buttons_old
 000                                   NAMEREG sC, state
 000                                   ; -- internal representation of the number
 000                                   NAMEREG sA, port1
 000                                   NAMEREG sB, port2
 000                                   NAMEREG s9, port3
 000                                   NAMEREG s8, port4
 000                                   NAMEREG s7, selected_number
 000                                   NAMEREG s6, digit_number_7seg
 000                                   NAMEREG s5, button_dif
 000                            reset: 
 000                                   ; reset digit to 0000
 000  2003D                            CALL 03D[get_digit]                                         ; load 0
 001  2D60F                            OUTPUT s6[digit_number_7seg], 0F[00001111'b]
 002                        loop_main: 
 002  00FE0                            LOAD sF[buttons_old], sE[buttons]
 003  09E00                            INPUT sE[buttons], 00                                       ; read buttons
 004  005E0                            LOAD s5[button_dif], sE[buttons]
 005  065F0                            XOR s5[button_dif], sF[buttons_old]
 006  32002                            JUMP Z, 002[loop_main]
 007             handle_button_change: 
 007                 handle_button_up: 
 007  01102                            LOAD s1, 02[button_up]
 008  20035                            CALL 035[has_button_changed]
 009  32013                            JUMP Z, 013[handle_button_down]
 00A  20037                            CALL 037[is_button_presed]
 00B  3A00F                            JUMP C, 00F[handle_button_up_pressed]
 00C  20039                            CALL 039[is_button_released]
 00D  3A00F                            JUMP C, 00F[handle_button_up_pressed]
 00E  22013                            JUMP 013[handle_button_down]
 00F         handle_button_up_pressed: 
 00F  11A01                            ADD sA[port1], 01
 010  03A0F                            AND sA[port1], 0F
 011  22013                            JUMP 013[handle_button_down]
 012                      up_released: 
 012  22013                            JUMP 013[handle_button_down]
 013               handle_button_down: 
 013  01101                            LOAD s1, 01[button_down]
 014  20035                            CALL 035[has_button_changed]
 015  32002                            JUMP Z, 002[loop_main]
 016  20037                            CALL 037[is_button_presed]
 017  3A01B                            JUMP C, 01B[down_pressed]
 018  20039                            CALL 039[is_button_released]
 019  3A01E                            JUMP C, 01E[down_released]
 01A  22002                            JUMP 002[loop_main]
 01B                     down_pressed: 
 01B  19A01                            SUB sA[port1], 01
 01C  03A0F                            AND sA[port1], 0F
 01D  22013                            JUMP 013[handle_button_down]
 01E                    down_released: 
 01E  22013                            JUMP 013[handle_button_down]
 01F  22002                            JUMP 002[loop_main]
 020                       update_pos: 
 020                     update_pos_1: 
 020  0D001                            TEST s0, 01
 021  32025                            JUMP Z, 025[update_pos_2]
 022  007A0                            LOAD s7[selected_number], sA[port1]
 023  2003D                            CALL 03D[get_digit]
 024  2D601                            OUTPUT s6[digit_number_7seg], 01[7seg_el1_port]
 025                     update_pos_2: 
 025  0D002                            TEST s0, 02
 026  3202A                            JUMP Z, 02A[update_pos_3]
 027  007B0                            LOAD s7[selected_number], sB[port2]
 028  2003D                            CALL 03D[get_digit]
 029  2D602                            OUTPUT s6[digit_number_7seg], 02[7seg_el2_port]
 02A                     update_pos_3: 
 02A  0D004                            TEST s0, 04
 02B  3202F                            JUMP Z, 02F[update_pos_4]
 02C  00790                            LOAD s7[selected_number], s9[port3]
 02D  2003D                            CALL 03D[get_digit]
 02E  2D604                            OUTPUT s6[digit_number_7seg], 04[7seg_el3_port]
 02F                     update_pos_4: 
 02F  0D008                            TEST s0, 08
 030  32034                            JUMP Z, 034[update_end]
 031  00780                            LOAD s7[selected_number], s8[port4]
 032  2003D                            CALL 03D[get_digit]
 033  2D608                            OUTPUT s6[digit_number_7seg], 08[7seg_el4_port]
 034                       update_end: 
 034  25000                            RETURN 
 035               has_button_changed: 
 035  0C510                            TEST s5[button_dif], s1
 036  25000                            RETURN 
 037                 is_button_presed: 
 037  0CE10                            TEST sE[buttons], s1
 038  25000                            RETURN 
 039               is_button_released: 
 039  0CF10                            TEST sF[buttons_old], s1
 03A  25000                            RETURN 
 03B                        test_edit: 
 03B  0DE08                            TEST sE[buttons], 08[00001000'b]                            ;
 03C  25000                            RETURN 
 03D                        get_digit: 
 03D  01000                            LOAD s0, 00[tablica'upper]
 03E  01143                            LOAD s1, 43[tablica'lower]
 03F  10170                            ADD s1, s7[selected_number]
 040  13200                            ADDCY s2, 00
 041  24010                            CALL@ (s0, s1)
 042  25000                            RETURN 
 043                          tablica: 
 043  2163F                            LOAD&RETURN s6[digit_number_7seg], 3F[7_segment_decode#:3F]
 044  21606                            LOAD&RETURN s6[digit_number_7seg], 06[7_segment_decode#:06]
 045  2165B                            LOAD&RETURN s6[digit_number_7seg], 5B[7_segment_decode#:5B]
 046  2164F                            LOAD&RETURN s6[digit_number_7seg], 4F[7_segment_decode#:4F]
 047  21666                            LOAD&RETURN s6[digit_number_7seg], 66[7_segment_decode#:66]
 048  2166D                            LOAD&RETURN s6[digit_number_7seg], 6D[7_segment_decode#:6D]
 049  2167D                            LOAD&RETURN s6[digit_number_7seg], 7D[7_segment_decode#:7D]
 04A  21607                            LOAD&RETURN s6[digit_number_7seg], 07[7_segment_decode#:07]
 04B  2167F                            LOAD&RETURN s6[digit_number_7seg], 7F[7_segment_decode#:7F]
 04C  2166F                            LOAD&RETURN s6[digit_number_7seg], 6F[7_segment_decode#:6F]
 04D                                   ;// ; procedura opĂłĹşniajÄca (opĂłĹşnienie w s4)
 04D                                   ;// delay:
 04D                                   ;//  LOAD se, s4
 04D                                   ;// delay_1:
 04D                                   ;//  LOAD sf, 00
 04D                                   ;// delay_2:
 04D                                   ;//  SUB sf, 01
 04D                                   ;//  JUMP NZ, delay_2
 04D                                   ;//  SUB se, 01
 04D                                   ;//  JUMP NZ, delay_1
 04D                                   ;//  RETURN


All unused memory locations contain zero (equivalent to 'LOAD s0, s0')



List of PSM files that have been assembled

C:\Users\lukgla\Desktop\Vivado\pico\pblaze_6.psm



List of defined constants

 CONSTANT name     Value        Source PSM File

 timestamp_hours   00'd         
 timestamp_minutes 13'd         
 timestamp_seconds 35'd         
 datestamp_year    24'd         
 datestamp_month   4'd          
 datestamp_day     06'd         
 NUL               00           
 BEL               07           
 BS                08           
 HT                09           
 LF                0A           
 VT                0B           
 CR                0D           
 ESC               1B           
 DEL               7F           
 DCS               90           
 ST                9C           
 7seg_el1_port     00000001'b   pblaze_6.psm
 7seg_el2_port     00000010'b   pblaze_6.psm
 7seg_el3_port     00000100'b   pblaze_6.psm
 7seg_el4_port     00001000'b   pblaze_6.psm
 state_is_editing  10000000'b   pblaze_6.psm
 button_up         00000010'b   pblaze_6.psm
 button_down       00000001'b   pblaze_6.psm
 button_edit       00001000'b   pblaze_6.psm
 button_left       00001000'b   pblaze_6.psm
 button_right      00000100'b   pblaze_6.psm



List of defined tables

 TABLE name          Table                            Source PSM File

 7_segment_decode#   [3F,06,5B,4F,66,6D,7D,07,7F,6F]  pblaze_6.psm



List of text strings

 STRING name       String         Source PSM File

 KCPSM6_version$   "v2.70"        
 datestamp$        "06 Apr 2024"  
 timestamp$        "00:13:35"     



List of line labels

   Label                      Addr  Source PSM File

 * reset                      000   pblaze_6.psm
   loop_main                  002   pblaze_6.psm
 * handle_button_change       007   pblaze_6.psm
 * handle_button_up           007   pblaze_6.psm
   handle_button_up_pressed   00F   pblaze_6.psm
 * up_released                012   pblaze_6.psm
   handle_button_down         013   pblaze_6.psm
   down_pressed               01B   pblaze_6.psm
   down_released              01E   pblaze_6.psm
 * update_pos                 020   pblaze_6.psm
 * update_pos_1               020   pblaze_6.psm
   update_pos_2               025   pblaze_6.psm
   update_pos_3               02A   pblaze_6.psm
   update_pos_4               02F   pblaze_6.psm
   update_end                 034   pblaze_6.psm
   has_button_changed         035   pblaze_6.psm
   is_button_presed           037   pblaze_6.psm
   is_button_released         039   pblaze_6.psm
 * test_edit                  03B   pblaze_6.psm
   get_digit                  03D   pblaze_6.psm
   tablica                    043   pblaze_6.psm

      * Line label has not been referenced in any instructions.
        Hint - This may indicate unused code that could be
               removed to reduce the size of this program.



Instruction usage statistics

 Instruction    Instances

 LOAD             10
 STAR              -

 AND               2
 OR                -
 XOR               1

 ADD               2
 ADDCY             1
 SUB               1
 SUBCY             -

 TEST              8
 TESTCY            -
 COMPARE           -
 COMPARECY         -

 SL0               -
 SL1               -
 SLX               -
 SLA               -
 RL                -
 SR0               -
 SR1               -
 SRX               -
 SRA               -
 RR                -

 REGBANK           -

 INPUT             1
 OUTPUT            5
 OUTPUTK           -

 STORE             -
 FETCH             -

 DISABLE           -
 ENABLE            -
 RETURNI           -

 JUMP             18
 JUMP@             -
 CALL             11
 CALL@             1
 RETURN            6
 LOAD&RETURN      10

 HWBUILD           -



End of KCPSM6 log file.
