KCPSM6 Assembler log file for program 'C:\Users\lukgla\Desktop\Vivado\pico\pblaze_6.psm'.
Generated by KCPSM6 version v2.70
Ken Chapman - Xilinx Ltd - 16th May 2014

Assembly datestamp: 07 Apr 2024
Assembly timestamp: 00:50:56

Contents
  Assembly listing
  List of PSM files
  List of CONSTANTs
  List of TABLEs
  List of STRINGs
  List of line labels
  Instruction usage statistics


Last occupied address: 054 hex
Nominal program memory size: 1K (1024)   address(9:0)
Actual memory size: 4096
  (Default memory size)
Occupied memory locations: 85
Memory locations available: 4011


Assembly listing

 Addr Code                             Instruction

 000                                   ;
 000                                   ; PiÄty program na Picoblaze
 000                                   ;
 000                                   TABLE 7_segment_decode#, [3F,06,5B,4F,66,6D,7D,07,7F,6F]
 000                                   CONSTANT 7seg_el1_port, 00000001'b
 000                                   CONSTANT 7seg_el2_port, 00000010'b
 000                                   CONSTANT 7seg_el3_port, 00000100'b
 000                                   CONSTANT 7seg_el4_port, 00001000'b
 000                                   CONSTANT state_is_editing, 10000000'b
 000                                   ; -- port is equal to which one is edited right now
 000                                   CONSTANT button_up, 00000010'b
 000                                   CONSTANT button_down, 00000001'b
 000                                   CONSTANT button_edit, 00001000'b
 000                                   CONSTANT button_left, 00001000'b
 000                                   CONSTANT button_right, 00000100'b
 000                                   NAMEREG sE, buttons
 000                                   NAMEREG sF, buttons_old
 000                                   NAMEREG sC, state
 000                                   ; -- internal representation of the number
 000                                   NAMEREG sA, port1
 000                                   NAMEREG sB, port2
 000                                   NAMEREG s9, port3
 000                                   NAMEREG s8, port4
 000                                   NAMEREG s7, selected_number
 000                                   NAMEREG s6, digit_number_7seg
 000                                   NAMEREG s5, button_dif
 000                            reset: 
 000                                   ; reset digit to 0000
 000  01700                            LOAD s7[selected_number], 00
 001  20045                            CALL 045[get_digit]                                         ; load 0
 002  2D60F                            OUTPUT s6[digit_number_7seg], 0F[00001111'b]
 003                        loop_main: 
 003  00FE0                            LOAD sF[buttons_old], sE[buttons]
 004  09E00                            INPUT sE[buttons], 00                                       ; read buttons
 005  005E0                            LOAD s5[button_dif], sE[buttons]
 006  065F0                            XOR s5[button_dif], sF[buttons_old]
 007  32003                            JUMP Z, 003[loop_main]
 008             handle_button_change: 
 008                 handle_button_up: 
 008  01102                            LOAD s1, 02[button_up]
 009  2003D                            CALL 03D[has_button_changed]
 00A  32016                            JUMP Z, 016[handle_button_down]
 00B  2003F                            CALL 03F[is_button_presed]
 00C  3A010                            JUMP C, 010[handle_button_up_pressed]
 00D  20041                            CALL 041[is_button_released]
 00E  3A010                            JUMP C, 010[handle_button_up_pressed]
 00F  22016                            JUMP 016[handle_button_down]
 010         handle_button_up_pressed: 
 010  11A01                            ADD sA[port1], 01
 011  03A0F                            AND sA[port1], 0F
 012  01001                            LOAD s0, 01
 013  20025                            CALL 025[update_pos]
 014  22016                            JUMP 016[handle_button_down]
 015                      up_released: 
 015  22016                            JUMP 016[handle_button_down]
 016               handle_button_down: 
 016  01101                            LOAD s1, 01[button_down]
 017  2003D                            CALL 03D[has_button_changed]
 018  32003                            JUMP Z, 003[loop_main]
 019  2003F                            CALL 03F[is_button_presed]
 01A  3A01E                            JUMP C, 01E[down_pressed]
 01B  20041                            CALL 041[is_button_released]
 01C  3A023                            JUMP C, 023[down_released]
 01D  22003                            JUMP 003[loop_main]
 01E                     down_pressed: 
 01E  19A01                            SUB sA[port1], 01
 01F  03A0F                            AND sA[port1], 0F
 020  01001                            LOAD s0, 01
 021  20025                            CALL 025[update_pos]
 022  22016                            JUMP 016[handle_button_down]
 023                    down_released: 
 023  22016                            JUMP 016[handle_button_down]
 024  22003                            JUMP 003[loop_main]
 025                       update_pos: 
 025                     update_pos_1: 
 025  0D001                            TEST s0, 01
 026  3202B                            JUMP Z, 02B[update_pos_2]
 027  007A0                            LOAD s7[selected_number], sA[port1]
 028  20045                            CALL 045[get_digit]
 029  2D601                            OUTPUT s6[digit_number_7seg], 01[7seg_el1_port]
 02A  2203C                            JUMP 03C[update_end]
 02B                     update_pos_2: 
 02B  0D002                            TEST s0, 02
 02C  32031                            JUMP Z, 031[update_pos_3]
 02D  007B0                            LOAD s7[selected_number], sB[port2]
 02E  20045                            CALL 045[get_digit]
 02F  2D602                            OUTPUT s6[digit_number_7seg], 02[7seg_el2_port]
 030  2203C                            JUMP 03C[update_end]
 031                     update_pos_3: 
 031  0D004                            TEST s0, 04
 032  32037                            JUMP Z, 037[update_pos_4]
 033  00790                            LOAD s7[selected_number], s9[port3]
 034  20045                            CALL 045[get_digit]
 035  2D604                            OUTPUT s6[digit_number_7seg], 04[7seg_el3_port]
 036  2203C                            JUMP 03C[update_end]
 037                     update_pos_4: 
 037  0D008                            TEST s0, 08
 038  3203C                            JUMP Z, 03C[update_end]
 039  00780                            LOAD s7[selected_number], s8[port4]
 03A  20045                            CALL 045[get_digit]
 03B  2D608                            OUTPUT s6[digit_number_7seg], 08[7seg_el4_port]
 03C                       update_end: 
 03C  25000                            RETURN 
 03D               has_button_changed: 
 03D  0C510                            TEST s5[button_dif], s1
 03E  25000                            RETURN 
 03F                 is_button_presed: 
 03F  0CE10                            TEST sE[buttons], s1
 040  25000                            RETURN 
 041               is_button_released: 
 041  0CF10                            TEST sF[buttons_old], s1
 042  25000                            RETURN 
 043                        test_edit: 
 043  0DE08                            TEST sE[buttons], 08[00001000'b]                            ;
 044  25000                            RETURN 
 045                        get_digit: 
 045  01000                            LOAD s0, 00[tablica'upper]
 046  0114B                            LOAD s1, 4B[tablica'lower]
 047  10170                            ADD s1, s7[selected_number]
 048  13000                            ADDCY s0, 00
 049  24010                            CALL@ (s0, s1)
 04A  25000                            RETURN 
 04B                          tablica: 
 04B  2163F                            LOAD&RETURN s6[digit_number_7seg], 3F[7_segment_decode#:3F]
 04C  21606                            LOAD&RETURN s6[digit_number_7seg], 06[7_segment_decode#:06]
 04D  2165B                            LOAD&RETURN s6[digit_number_7seg], 5B[7_segment_decode#:5B]
 04E  2164F                            LOAD&RETURN s6[digit_number_7seg], 4F[7_segment_decode#:4F]
 04F  21666                            LOAD&RETURN s6[digit_number_7seg], 66[7_segment_decode#:66]
 050  2166D                            LOAD&RETURN s6[digit_number_7seg], 6D[7_segment_decode#:6D]
 051  2167D                            LOAD&RETURN s6[digit_number_7seg], 7D[7_segment_decode#:7D]
 052  21607                            LOAD&RETURN s6[digit_number_7seg], 07[7_segment_decode#:07]
 053  2167F                            LOAD&RETURN s6[digit_number_7seg], 7F[7_segment_decode#:7F]
 054  2166F                            LOAD&RETURN s6[digit_number_7seg], 6F[7_segment_decode#:6F]
 055                                   ;// ; procedura opĂłĹşniajÄca (opĂłĹşnienie w s4)
 055                                   ;// delay:
 055                                   ;//  LOAD se, s4
 055                                   ;// delay_1:
 055                                   ;//  LOAD sf, 00
 055                                   ;// delay_2:
 055                                   ;//  SUB sf, 01
 055                                   ;//  JUMP NZ, delay_2
 055                                   ;//  SUB se, 01
 055                                   ;//  JUMP NZ, delay_1
 055                                   ;//  RETURN


All unused memory locations contain zero (equivalent to 'LOAD s0, s0')



List of PSM files that have been assembled

C:\Users\lukgla\Desktop\Vivado\pico\pblaze_6.psm



List of defined constants

 CONSTANT name     Value        Source PSM File

 timestamp_hours   00'd         
 timestamp_minutes 50'd         
 timestamp_seconds 56'd         
 datestamp_year    24'd         
 datestamp_month   4'd          
 datestamp_day     07'd         
 NUL               00           
 BEL               07           
 BS                08           
 HT                09           
 LF                0A           
 VT                0B           
 CR                0D           
 ESC               1B           
 DEL               7F           
 DCS               90           
 ST                9C           
 7seg_el1_port     00000001'b   pblaze_6.psm
 7seg_el2_port     00000010'b   pblaze_6.psm
 7seg_el3_port     00000100'b   pblaze_6.psm
 7seg_el4_port     00001000'b   pblaze_6.psm
 state_is_editing  10000000'b   pblaze_6.psm
 button_up         00000010'b   pblaze_6.psm
 button_down       00000001'b   pblaze_6.psm
 button_edit       00001000'b   pblaze_6.psm
 button_left       00001000'b   pblaze_6.psm
 button_right      00000100'b   pblaze_6.psm



List of defined tables

 TABLE name          Table                            Source PSM File

 7_segment_decode#   [3F,06,5B,4F,66,6D,7D,07,7F,6F]  pblaze_6.psm



List of text strings

 STRING name       String         Source PSM File

 KCPSM6_version$   "v2.70"        
 datestamp$        "07 Apr 2024"  
 timestamp$        "00:50:56"     



List of line labels

   Label                      Addr  Source PSM File

 * reset                      000   pblaze_6.psm
   loop_main                  003   pblaze_6.psm
 * handle_button_change       008   pblaze_6.psm
 * handle_button_up           008   pblaze_6.psm
   handle_button_up_pressed   010   pblaze_6.psm
 * up_released                015   pblaze_6.psm
   handle_button_down         016   pblaze_6.psm
   down_pressed               01E   pblaze_6.psm
   down_released              023   pblaze_6.psm
   update_pos                 025   pblaze_6.psm
 * update_pos_1               025   pblaze_6.psm
   update_pos_2               02B   pblaze_6.psm
   update_pos_3               031   pblaze_6.psm
   update_pos_4               037   pblaze_6.psm
   update_end                 03C   pblaze_6.psm
   has_button_changed         03D   pblaze_6.psm
   is_button_presed           03F   pblaze_6.psm
   is_button_released         041   pblaze_6.psm
 * test_edit                  043   pblaze_6.psm
   get_digit                  045   pblaze_6.psm
   tablica                    04B   pblaze_6.psm

      * Line label has not been referenced in any instructions.
        Hint - This may indicate unused code that could be
               removed to reduce the size of this program.



Instruction usage statistics

 Instruction    Instances

 LOAD             13
 STAR              -

 AND               2
 OR                -
 XOR               1

 ADD               2
 ADDCY             1
 SUB               1
 SUBCY             -

 TEST              8
 TESTCY            -
 COMPARE           -
 COMPARECY         -

 SL0               -
 SL1               -
 SLX               -
 SLA               -
 RL                -
 SR0               -
 SR1               -
 SRX               -
 SRA               -
 RR                -

 REGBANK           -

 INPUT             1
 OUTPUT            5
 OUTPUTK           -

 STORE             -
 FETCH             -

 DISABLE           -
 ENABLE            -
 RETURNI           -

 JUMP             21
 JUMP@             -
 CALL             13
 CALL@             1
 RETURN            6
 LOAD&RETURN      10

 HWBUILD           -



End of KCPSM6 log file.
