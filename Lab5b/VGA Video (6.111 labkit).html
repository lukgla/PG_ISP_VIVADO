<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252">
<link rel="stylesheet" href="VGA%20Video%20(6.111%20labkit)_files/6.111.css" type="text/css">
<title>VGA Video (6.111 labkit)</title>
</head>
<body>

<table width="100%" cellspacing="0" cellpadding="5">
  <tbody><tr>
    <td style="background: url(http://www-mtl.mit.edu/Courses/6.111/labkit/images/title_bg.jpg); background-color: #313131; background-repeat: no-repeat;">
      <table width="100%" cellspacing="0" cellpadding="2">
        <tbody><tr>
	  <td height="60" valign="middle">
            <img src="VGA%20Video%20(6.111%20labkit)_files/Untitled.html" alt="MIT">
          </td>
          <td valign="middle" align="right">
            <table cellpadding="0" cellspacing="0">
  	      <tbody><tr>
	        <td><img src="VGA%20Video%20(6.111%20labkit)_files/Untitled_002.html" alt="6.111 Labkit"></td>
	        <td>&nbsp;</td>
	        <td><p style="color:#999999; text-align:right; font-size:30px"><b>&nbsp;FPGA Labkit</b></p></td>
	      </tr>
            </tbody></table>
          </td>
        </tr>
      </tbody></table>
    </td>
  </tr>
  <tr>
    <td bgcolor="#666666" height="20" valign="middle">
      <p style="color: #CCCCCC; text-align:right; font-size: 10px; margin-bottom:0px;"><i>for 6.111 Introduction to Digital Systems</i></p>
    </td>
  </tr>
  
  <tr>
    <td bgcolor="#FFFFFF">

<p><i><a href="https://web.mit.edu/6.111/www/">6.111 home</a> &#8594; <a href="https://web.mit.edu/6.111/www/labkit/">Labkit home</a> &#8594; VGA Video Output</i></p>

<h1>VGA Video Output</h1>
<i>by Nathan Ickes</i>

<h2>Introduction</h2>

<p>VGA is a high-resolution video standard used mostly for computer 
monitors, where ability to transmit a sharp, detailed image is 
essential. VGA uses separate wires to transmit the three color component
 signals and vertical and horizontal synchronization signals.</p>

<h2>VGA Signals</h2>

<p>Like any video format, VGA video is a stream of frames: each frame is
 made up of a series of horizontal lines, and each line is made up of a 
series of pixels. The lines in each frame are transmitted in order from 
top to bottom (VGA is not interlaced), and the pixels in each line are 
transmitted from left to right. Separate horizontal and vertical 
synchronization signals are used to define the ends of each line and 
frame. A composite synchronization signal (actually an XOR of the 
horizontal and vertical signals) is also encoded on the green color 
channel.</p>

<p>The ADV7125 video DAC reads an 8-bit value for each of the red, 
green, and blue channels on each cycle of the pixel clock. There is a 
two-cycle pipeline delay between when the digital codes are read by the 
DAC and when the corresponding analog voltages appear on the DAC 
outputs. The RGB input signals can be overridden by the sync and blank 
signals: The active low blank signal forces all three DAC outputs to 
their black level, while the active low sync signal forces the green DAC
 to a special sync level below the normal black level.</p>

<p>Each line of video begins with an active video region, in which RGB 
values are output for each pixel in the line. The active region is 
followed by a blanking region, in which black pixels are transmitted. In
 the middle of the blanking interval, a horizontal sync pulse is 
transmitted. The blanking interval before the sync pulse is known as the
 "front porch", and the blanking interval after the sync pulse is known 
as the "back porch". Note that the dedicated horizontal sync signal 
output from the FPGA directly to the VGA connector must be delayed by 
two clock cycles relative to the composite sync signal passed to the DAC
 chip, to account for the pipeline delay of the DAC.</p>

<center><img src="VGA%20Video%20(6.111%20labkit)_files/vga_line.png"></center>

<p>Frames are constructed from lines in much the same way as lines are 
constructed from pixels. The beginning of a frame contains all of the 
lines that will actually be displayed on the screen, followed by a 
number of black lines that make up the front porch. Next comes a 
vertical sync pulse that lasts for several lines, and then more black 
lines to make up a back porch. Note that the composite sync signal 
embedded in the green channel appears inverted during the vertical sync 
pulse: remember that the composite sync is an XOR of the horizontal and 
vertical sync signals.</p>

<center><img src="VGA%20Video%20(6.111%20labkit)_files/vga_frame.png"></center>

<h2>VGA Timings</h2>

<p> The following table lists timing values for several popular resolutions.</p>

<table align="center" border="1" cellspacing="0" cellpadding="5">
  <tbody><tr><th rowspan="2">Format</th>
  <th rowspan="2">Pixel Clock<br>(MHz)</th>
  <th colspan="4">Horizontal (in Pixels)</th>
  <th colspan="4">Vertical (in Lines)</th>
</tr>
<tr>
  <th>Active<br>Video</th>
  <th>Front<br>Porch</th>
  <th>Sync<br>Pulse</th>
  <th>Back<br>Porch</th>
  <th>Active<br>Video</th>
  <th>Front<br>Porch</th>
  <th>Sync<br>Pulse</th>
  <th>Back<br>Porch</th>
</tr>
<tr>
  <td>640x480, 60Hz</td>
  <td>25.175</td>
  <td>640</td><td>16</td><td>96</td><td>48</td>
  <td>480</td><td>11</td><td>2</td><td>31</td>
</tr>
<tr>
  <td>640x480, 72Hz</td>
  <td>31.500</td>
  <td>640</td><td>24</td><td>40</td><td>128</td>
  <td>480</td><td>9</td><td>3</td><td>28</td>
</tr>
<tr>
  <td>640x480, 75Hz</td>
  <td>31.500</td>
  <td>640</td><td>16</td><td>96</td><td>48</td>
  <td>480</td><td>11</td><td>2</td><td>32</td>
</tr>
<tr>
  <td>640x480, 85Hz</td>
  <td>36.000</td>
  <td>640</td><td>32</td><td>48</td><td>112</td>
  <td>480</td><td>1</td><td>3</td><td>25</td>
</tr>
<tr>
  <td>800x600, 56Hz</td>
  <td>38.100</td>
  <td>800</td><td>32</td><td>128</td><td>128</td>
  <td>600</td><td>1</td><td>4</td><td>14</td>
</tr>
<tr>
  <td>800x600, 60Hz</td>
  <td>40.000</td>
  <td>800</td><td>40</td><td>128</td><td>88</td>
  <td>600</td><td>1</td><td>4</td><td>23</td>
</tr>
<tr>
  <td>800x600, 72Hz</td>
  <td>50.000</td>
  <td>800</td><td>56</td><td>120</td><td>64</td>
  <td>600</td><td>37</td><td>6</td><td>23</td>
</tr>
<tr>
  <td>800x600, 75Hz</td>
  <td>49.500</td>
  <td>800</td><td>16</td><td>80</td><td>160</td>
  <td>600</td><td>1</td><td>2</td><td>21</td>
</tr>
<tr>
  <td>800x600, 85Hz</td>
  <td>56.250</td>
  <td>800</td><td>32</td><td>64</td><td>152</td>
  <td>600</td><td>1</td><td>3</td><td>27</td>
</tr>
<tr>
  <td>1024x768, 60Hz</td>
  <td>65.000</td>
  <td>1024</td><td>24</td><td>136</td><td>160</td>
  <td>768</td><td>3</td><td>6</td><td>29</td>
</tr>
<tr>
  <td>1024x768, 70Hz</td>
  <td>75.000</td>
  <td>1024</td><td>24</td><td>136</td><td>144</td>
  <td>768</td><td>3</td><td>6</td><td>29</td>
</tr>
<tr>
  <td>1024x768, 75Hz</td>
  <td>78.750</td>
  <td>1024</td><td>16</td><td>96</td><td>176</td>
  <td>768</td><td>1</td><td>3</td><td>28</td>
</tr>
<tr>
  <td>1024x768, 85Hz</td>
  <td>94.500</td>
  <td>1024</td><td>48</td><td>96</td><td>208</td>
  <td>768</td><td>1</td><td>3</td><td>36</td>
</tr>
<tr>
  <td>1280x1024, 60Hz</td>
  <td>108.00</td>
  <td>1280</td><td>48</td><td>112</td><td>248</td>
  <td>768</td><td>1</td><td>3</td><td>38</td>
</tr>

<tr>
  <td>HDMI 720P <br>1280x720p 60Hz</td>
  <td>75.25</td>
  <td>1280</td><td>72</td><td>80</td><td>216</td>
  <td>720</td><td>3</td><td>5</td><td>30</td>
</tr>

<tr>
  <td>HDMI 1080P <br>1920x1040 60Hz</td>
  <td>148.5</td>
  <td>1920</td><td>88</td><td>44</td><td>148</td>
  <td>1080</td><td>4</td><td>5</td><td>36</td>
</tr>




<tr>
  <td colspan="10"><i>Source: Rick Ballantyne, Xilinx Inc.</i></td>
</tr>
</tbody></table>

<p> As with RS-232, the standard for VGA video is that there are lots of
 standards. Every manufacturer seems to list different timings in the 
manuals for their monitors. Fortunately, the exact values given in the 
table above are not particularly critical. On a CRT monitor, the lengths
 of the front and back porches control the position of the image on the 
display. If the image appears offset to the right or left, or up or 
down, try adjusting the front and back porch values for the 
corresponding direction (or use the image position adjustments on the 
monitor, which accomplish the same thing). LCD monitors will generally 
center the active video region automatically.</p>

<h2>Generating the Pixel Clock</h2>

<p>The pixel clock frequency can be synthesized from the 27MHz 
oscillator built into the labkits by using one of the twelve Digital 
Clock Managers (DCMs) built into the labkit FPGA. DCMs have numerous 
uses, one of which is generating a clock signal whose frequency is some 
multiple of the frequency of a reference clock.</p>

<p>DCMs cannot be inferred by behavioral Verilog: they must be 
explicitly instantiated. The following Verilog code illustrates how to 
instantiate a DCM in order to generate a pixel clock.
</p><pre> DCM pixel_clock_dcm (.CLKIN(clock_27mhz), 
                      .CLKFX(pixel_clock));
</pre>
The reference clock (<code>clock_27mhz</code> in the above example) must be supplied to <code>CLKIN</code> input of the DCM. <code>CLKFX</code>
 is the frequency-multiplied output clock. The above code fragment 
leaves many of the DCMs inputs and outputs unconnected: the unconnected 
ports can safely be ignored in this application.<p></p>

<p>The operation of a DCM is determined by a number of constraints, 
which can be entered as special comments in the Verilog code. For our 
simple frequency synthesis application, only two constraints are 
essential.
</p><pre> // synthesis attribute CLKFX_DIVIDE of pixel_clock_dcm is 9
 // synthesis attribute CLKFX_MULTIPLY of pixel_clock_dcm is 26
</pre>
The CLKFX_MULTIPLY and CLKFX_DIVIDE constraints determine the frequency 
of the output clock. In the example above, the 27MHz input clock 
frequency is multiplied by 26 and then divided by 9, resulting in an 
output frequency of 27*26/9 = 78MHz. CLKFX_MULTIPLY must be between 2 
and 32 (inclusive), and CLKFX_DIVIDE must be between 1 and 32.<p></p>

<p>This has been a very minimal description of how to use a DCM: for a 
complete explanation of the features and capabilities of DCMs, see the <a href="http://toolbox.xilinx.com/docsan/xilinx6/books/docs/lib/lib.pdf"><i>Libraries Guide</i></a> volume of the <a href="http://www.xilinx.com/support/sw_manuals/xilinx6/index.htm">Xilinx documentation</a>.

</p><h2>More Information</h2>

<ul>
<li>Datasheet for the <a href="https://web.mit.edu/6.111/www/labkit/datasheets/ADV7125.pdf">ADV7125</a>
</li></ul>

     </td>
  </tr>
  <tr>
    <td style="background: url(http://www-mtl.mit.edu/Courses/6.111/labkit/images/title_bg.jpg); background-color: #313131; background-repeat: no-repeat;">
      <p style="color: #CCCCCC; margin-bottom:0px; font-size:10px;"><i>MIT 6.111 Introduction to Digital Systems, Updated  August 12, 2019</i></p>
    </td>
  </tr>
</tbody></table>





</body></html>